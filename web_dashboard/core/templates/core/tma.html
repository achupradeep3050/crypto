{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMA // DASHBOARD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<body class="p-6">
    <div id="main-content" class="max-w-7xl mx-auto flex flex-col gap-6 z-10 relative">

        <!-- Navigation -->
        <nav class="flex gap-6 border-b border-gray-800 pb-4 mb-2">
            <a href="/"
                class="text-gray-500 hover:text-white font-bold text-xs tracking-wider uppercase transition">Home</a>
            <a href="/mean-reversion"
                class="text-gray-500 hover:text-cyan-400 font-bold text-xs tracking-wider uppercase transition">Mean
                Reversion</a>
            <a href="/tma" class="text-pink-400 font-bold text-xs tracking-wider uppercase">TMA System</a>
        </nav>

        <!-- Header -->
        <div class="flex justify-between items-center mb-2">
            <div class="flex items-center gap-4">
                <i class="fas fa-wave-square text-3xl text-pink-400"></i>
                <div>
                    <h1 class="brand-text text-2xl">TMA SYSTEM</h1>
                    <div class="text-xs tracking-widest uppercase text-pink-400">Triple Moving Average + CMO + ADX</div>
                </div>
            </div>
            <div class="flex gap-4">
                <!-- Universal Stop -->
                <button onclick="stopAll()"
                    class="btn-stop-all px-4 py-2 rounded font-bold text-xs uppercase tracking-wider">HALT
                    SYSTEM</button>
            </div>
        </div>

        <!-- Strategy Card -->
        <div class="bw-card p-6">
            <div class="flex justify-between items-center mb-4 border-b border-gray-800 pb-2">
                <div class="flex items-center gap-3">
                    <div id="ind-tma" class="status-indicator"></div>
                    <h2 class="text-xl font-bold text-white">TMA ENGINE <span
                            class="text-gray-500 text-sm ml-2">(15m)</span></h2>
                </div>
                <div class="flex items-center gap-4">
                    <span id="status-tma" class="text-xs uppercase text-gray-500">Standby</span>
                    <button id="btn-tma" onclick="toggleBot('tma', 'start')"
                        class="btn-toggle px-4 py-1 rounded text-xs font-bold uppercase">Activate</button>
                </div>
            </div>

            <div class="grid grid-cols-12 gap-6">
                <!-- Market Data -->
                <div class="col-span-12 lg:col-span-8">
                    <table class="w-full text-left text-sm text-gray-400">
                        <thead class="text-xs uppercase border-b border-gray-800 text-pink-500">
                            <tr>
                                <th class="py-2">Asset</th>
                                <th class="py-2">Price</th>
                                <th class="py-2">TEMA</th>
                                <th class="py-2">CMO</th>
                                <th class="py-2">ADX</th>
                                <th class="py-2">Status</th>
                                <th class="py-2 text-right">Updated</th>
                            </tr>
                        </thead>
                        <tbody id="table-tma">
                            <!-- JS Injected -->
                        </tbody>
                    </table>
                </div>
                <!-- Logs -->
                <div class="col-span-12 lg:col-span-4 flex flex-col">
                    <div id="logs-tma"
                        class="h-60 overflow-y-auto custom-scrollbar text-xs font-mono text-gray-500 bg-black/20 p-2 rounded">
                        <div>Initializing TMA Module...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Info -->
        <div class="bw-card p-4 flex justify-between items-center text-sm">
            <div class="text-gray-500">Account Balance: <span id="val-balance"
                    class="text-white font-mono text-lg ml-2">$ --.--</span></div>
            <div class="text-gray-500">Equity: <span id="val-equity" class="text-white font-mono text-lg ml-2">$
                    --.--</span></div>
        </div>

    </div>

    <!-- Particles Background -->
    <div id="particles-js" class="fixed inset-0 z-0 pointer-events-none opacity-40"></div>
    <script src="{% static 'js/particles.min.js' %}"></script>
    <!-- Use same app.js but we might need to update it to verify which page we are on -->
    <!-- Trend Visualizer -->
    <div id="trend-visualizer" class="trend-vis-container"></div>

    <script src="{% static 'js/app.js' %}"></script>
    <script>
        particlesJS.load('particles-js', '{% static "js/particles.json" %}', function () {
            console.log('Particles Loaded');
        });
    </script>
</body>

</html>